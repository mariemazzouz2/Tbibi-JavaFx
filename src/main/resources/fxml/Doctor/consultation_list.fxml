<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane styleClass="root" stylesheets="@../../styles/modern.css" xmlns:fx="http://javafx.com/fxml/1" fx:controller="tests.Doctor.DoctorConsultationController">



    <top>
        <VBox spacing="15" styleClass="header-section">
            <padding>
                <Insets bottom="20" left="20" right="20" top="20" />
            </padding>
         <HBox>
            <children>
                  <Label styleClass="header-label" text="Gestion des consultations" />
            </children>
         </HBox>

            <HBox alignment="CENTER_LEFT" spacing="15" styleClass="filter-section">
                <ComboBox fx:id="filterStatus" prefWidth="150" promptText="Status" styleClass="filter-combo" />
                <ComboBox fx:id="filterType" prefWidth="150" promptText="Type" styleClass="filter-combo" />
                <DatePicker fx:id="filterDate" promptText="Date" styleClass="filter-date" />
            <Button alignment="TOP_LEFT" contentDisplay="RIGHT" mnemonicParsing="false" onAction="#goBack" text="Navigate Back" />
                <Region HBox.hgrow="ALWAYS" />
                <TextField fx:id="searchField" prefWidth="250" promptText="Rechercher..." styleClass="search-field" />
                <Button onAction="#handleRefresh" styleClass="button-raised" text="Actualiser" />
            </HBox>
        </VBox>
    </top>

    <center>
        <SplitPane dividerPositions="0.7" styleClass="main-split-pane">
            <!-- Consultations Table -->
            <VBox spacing="10" styleClass="content-section">
                <TableView fx:id="tableConsultations" styleClass="consultation-table" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colId" prefWidth="50" text="ID" />
                        <TableColumn fx:id="colType" prefWidth="100" text="Type" />
                        <TableColumn fx:id="colStatus" prefWidth="100" text="Status" />
                        <TableColumn fx:id="colDate" prefWidth="150" text="Date" />
                        <TableColumn fx:id="colPatient" prefWidth="150" text="Patient" />
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                    </columnResizePolicy>
                </TableView>

                <HBox alignment="CENTER" spacing="10" styleClass="action-buttons">
                    <padding>
                        <Insets bottom="10" left="10" right="10" top="10" />
                    </padding>
                    <Button fx:id="btnAccept" onAction="#handleAcceptAction" text="Accepter">
                        <styleClass>
                            <String fx:value="button-raised" />
                            <String fx:value="button-success" />
                        </styleClass>
                    </Button>
                    <Button fx:id="btnReject" onAction="#handleRejectAction" text="Refuser">
                        <styleClass>
                            <String fx:value="button-raised" />
                            <String fx:value="button-danger" />
                        </styleClass>
                    </Button>
                    <Button fx:id="btnComplete" onAction="#handleCompleteAction" text="Terminer">
                        <styleClass>
                            <String fx:value="button-raised" />
                            <String fx:value="button-primary" />
                        </styleClass>
                    </Button>
                    <Button fx:id="btnView" onAction="#handleViewAction" text="Voir détails">
                        <styleClass>
                            <String fx:value="button-raised" />
                            <String fx:value="button-info" />
                        </styleClass>
                    </Button>
                    <Button fx:id="btnOrdonnance" onAction="#handleOrdonnanceAction" text="Ordonnance">
                        <styleClass>
                            <String fx:value="button-raised" />
                            <String fx:value="button-secondary" />
                        </styleClass>
                    </Button>
                </HBox>

                <HBox alignment="CENTER" spacing="10" styleClass="pagination">
                    <padding>
                        <Insets bottom="10" left="10" right="10" top="10" />
                    </padding>
                    <Button onAction="#handlePreviousPage" styleClass="button-flat" text="Précédent" />
                    <Button onAction="#handleNextPage" styleClass="button-flat" text="Suivant" />
                </HBox>
            </VBox>

            <!-- Dashboard / Statistics -->
            <VBox alignment="TOP_CENTER" spacing="20" styleClass="dashboard-section">
                <padding>
                    <Insets bottom="20" left="20" right="20" top="20" />
                </padding>

                <Label styleClass="section-header" text="Tableau de bord" />

                <PieChart fx:id="statsPieChart" prefHeight="250" styleClass="stats-chart" title="Consultations par status" />

                <VBox alignment="CENTER_LEFT" spacing="15" styleClass="stats-container">
                    <Label fx:id="statsTotalLabel" styleClass="stat-label" text="Total: 0" />
                    <Label fx:id="statsPendingLabel" styleClass="stat-label" text="En attente: 0" />
                    <Label fx:id="statsTodayLabel" styleClass="stat-label" text="Aujourd'hui: 0" />
                </VBox>

                <Region VBox.vgrow="ALWAYS" />
            </VBox>
        </SplitPane>
    </center>

</BorderPane>
